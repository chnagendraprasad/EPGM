@{
    ViewBag.Title = "Child Growth Calculator";
    Layout = "~/Views/Shared/_AuthLayout.cshtml";
}

<link href="~/Content/css/themes/base/jquery-ui.css" rel="stylesheet" />

<style type="text/css">
    td, th {
        padding: 2px !important;
    }

    .clears {
        padding-top: 10px !important;
    }
</style>

<style type="text/css">
    .Viewbtn {
        background-color: #525659 !important;
        color: white;
        font-weight: bold;
        border-radius: 4px;
        width: 25%;
        border: 0px;
    }

    .min-height {
        min-height: 0px !important;
    }

    /*.input-group .input-group-addon {
        border-radius: 0;
        border-color: #d2d6de;
        background-color: #d2d6de !important;
    }*/

    .ui-state-highlight, .ui-widget-content .ui-state-highlight, .ui-widget-header .ui-state-highlight {
        border: 0px solid #ccc !important;
        background: none !important;
    }

    .ui-th-ltr, .ui-jqgrid .ui-jqgrid-htable th.ui-th-ltr {
        border-left: solid 1px !important;
        border-right: solid 1px !important;
        border-top: solid 1px !important;
        border-color: #ccc !important;
        background-color: #5ba432 !important;
        color: black !important;
    }

    .ui-widget-header .ui-state-default {
        border: 1px solid #cccccc;
        background: #fff !important;
    }

    th.ui-th-column div {
        height: auto !important;
    }

    .ui-jqgrid .ui-jqgrid-htable th div {
        height: auto !important;
        padding-bottom: 8px !important;
    }

    .content-header {
        position: relative;
        padding: 15px 15px 0 15px !important;
    }
</style>

<style>
    /*Sure*/
    th.ui-th-column div {
        white-space: normal !important;
        height: auto !important;
        padding: 2px !important;
    }


    .ui-jqgrid .ui-jqgrid-htable th div {
        overflow: visible !important;
        height: auto !important;
    }

    .ui-th-column, .ui-jqgrid .ui-jqgrid-htable th.ui-th-column {
        white-space: normal !important;
    }

    .ui-jqgrid .ui-th-div-ie {
        white-space: normal !important;
    }

    .ui-jqgrid-htable {
        /*letter-spacing: 1px !important;*/
    }

    .ui-jqgrid .ui-jqgrid-htable {
        line-height: 15px !important;
    }

    .ui-jqgrid tr.jqgrow td {
        padding: 0px 7px 0 4px !important;
    }

    .input-label {
        min-width: 90px !important;
        text-align: left;
    }

    .content-wrapper {
        min-height: 601px !important;
        overflow-y: visible !important;
    }

    .ui-th-ltr, .ui-jqgrid .ui-jqgrid-htable th.ui-th-ltr {
        color: white !important;
    }

    #Grid_IsEnrolledAtAttendance, #Grid_AttendanceStatus, #Grid_WHTimeStamp, #Grid_IsRegisteredAtAttendance {
        background-color: #961d21 !important;
    }
</style>

<style type="text/css">
    .nav-tabs {
        border-bottom: 2px solid #DDD;
    }

        .nav-tabs > li.active > a, .nav-tabs > li.active > a:focus, .nav-tabs > li.active > a:hover {
            border-width: 0;
        }

        .nav-tabs > li > a {
            border: none;
            color: #666;
        }

            .nav-tabs > li.active > a, .nav-tabs > li > a:hover {
                border: none;
                color: #4285F4 !important;
                background: transparent;
            }

            .nav-tabs > li > a::after {
                content: "";
                background: #4285F4;
                height: 2px;
                position: absolute;
                width: 100%;
                left: 0px;
                bottom: -1px;
                transition: all 250ms ease 0s;
                transform: scale(0);
            }

        .nav-tabs > li.active > a::after, .nav-tabs > li:hover > a::after {
            transform: scale(1);
        }

    .tab-nav > li > a::after {
        background: #21527d none repeat scroll 0% 0%;
        color: #fff;
    }

    .tab-pane {
        padding: 15px 0;
    }

    .card {
        background: #FFF none repeat scroll 0% 0%;
        box-shadow: 0px 1px 3px rgba(0, 0, 0, 0.3);
        margin-bottom: 30px;
    }
</style>



<script src="~/Scripts/Reports/ChildGrowthCalculator.js"></script>
<script src="~/Scripts/Common/Common.js"></script>

<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">

<div class="content-wrapper">
    <section class="panel-heading panel-brown">
        <div class="bodycontent">
            <ol class="breadcrumb">
                <li class="panel-title pull-left"><span href="#" style="font-weight: bold;">Child Growth Calculator</span></li>
                <li class="pull-right active">
                    @if (Session["UserTypeID"].ToString() == "1")
                    {
                    <a href="@Url.Content(" ~/")Home/Index"><i class="fa fa-dashboard"></i><span style="font-size: 14px">Dashboard</span> </a>
                    }
                    @if (Session["UserTypeID"].ToString() == "2" || Session["UserTypeID"].ToString() == "3" || Session["UserTypeID"].ToString() == "4")
                    {
                    <a href="@Url.Content(" ~/")Home/DistrictIndex"><i class="fa fa-dashboard"></i><span style="font-size: 14px">Dashboard</span></a>
                    }
                    @if (Session["UserTypeID"].ToString() == "5")
                    {
                    <a href="@Url.Content(" ~/")Home/ProjectIndex"><i class="fa fa-dashboard"></i><span style="font-size: 14px">Dashboard</span></a>
                    }
                    @if (Session["UserTypeID"].ToString() == "6")
                    {
                    <a href="@Url.Content(" ~/")Home/SectorIndex"><i class="fa fa-dashboard"></i><span style="font-size: 14px">Dashboard</span></a>
                    }
                    @if (Session["UserTypeID"].ToString() == "7")
                    {
                    <a href="@Url.Content(" ~/")Home/AWCIndex"><i class="fa fa-dashboard"></i><span style="font-size: 14px">Dashboard</span></a>
                    }
                </li>
            </ol>
        </div>
    </section>
    <section class="content">
        <div class="row">
            <div class="col-sm-12">
                <div class="col-sm-6">
                    <table style="width:80%">
                        <tr>
                            <td><b>Gender :</b></td>
                            <td>&nbsp;&nbsp;</td>
                            <td>
                                @Html.DropDownList("Gender", new List<SelectListItem>
                            {
                            new SelectListItem{ Text="--Select Gender--", Value = "0" },
                            new SelectListItem{ Text="Male", Value = "M" },
                            new SelectListItem{ Text="Female", Value = "F" }
                            }, new { @class = "form-control", @onchange = "ddchange()" })
                            </td>
                        </tr>
                        <tr>
                            <td><b>Date of Birth :</b></td>
                            <td>&nbsp;&nbsp;</td>
                            <td>@Html.TextBox("DOB", "", new { @class = "form-control datepicker", @readonly = "readonly" })</td>
                        </tr>
                        <tr>
                            <td><b>Child's Weight :</b></td>
                            <td>&nbsp;&nbsp;</td>
                            <td>@Html.TextBox("Weight", "", new { @class = "form-control", @onkeypress = "return dotandNumeric(event,this);", @maxlength = "7" })</td>
                        </tr>
                        <tr>
                            <td><b>Child's Height :</b></td>
                            <td>&nbsp;&nbsp;</td>
                            <td>@Html.TextBox("Height", "", new { @class = "form-control", @onkeypress = "return dotandNumeric(event,this);", @maxlength = "7" })</td>
                        </tr>
                        <tr>
                            <td colspan="3" align="center"><button type="submit" class="btn btn-primary" id="btnSubmit"><i class="fa fa-save"></i>Submit</button></td>
                        </tr>
                    </table>
                </div>
                <div class="col-sm-6">
                    <table width="80%" id="tblGrade" style="display:none">
                        <tr border="none">
                            <td><b>Age in Moths:</b>  <label id="AgeinMonths"></label></td>
                            <td></td>
                        </tr>
                        <tr>
                            <table width="80%" border="1" id="tblGrade2" style="display:none">
                                <tr>
                                    <td align="center">Weight/Age Criteria</td>
                                    <td align="center">Height/Weight Wasted</td>
                                    <td align="center">Height/Age Stunted</td>
                                </tr>
                                <tr>
                                    <td align="center"><label id="WA1"></label></td>
                                    <td align="center"><label id="HW1"></label></td>
                                    <td align="center"><label id="HA1"></label></td>
                                </tr>
                            </table>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-12">
                <a href="#" id="btnclick">Click Here to View Detailed Statistics</a>
            </div>
        </div>
        <div class="row" id="divtabs" style="display:none;width:54%">
            <div class="col-sm-12">
                <div class="card">
                    <ul class="nav nav-tabs" role="tablist">
                        <li role="presentation" id="lihome">
                            <a href="#home" aria-controls="home" role="tab" data-toggle="tab" class="col-sm-12" id="WAblock" onclick="EnableDisableWA()">Weight/Age Criteria</a>
                        </li>
                        <li role="presentation" id="liprofile">
                            <a href="#profile" aria-controls="profile" role="tab" data-toggle="tab" class="col-sm-12" id="HWblock" onclick="EnableDisableHW()">Height/Weight Wasted</a>
                        </li>
                        <li role="presentation" id="limessages">
                            <a href="#messages" aria-controls="messages" role="tab" data-toggle="tab" class="col-sm-12" id="HAblock" onclick="EnableDisableHA()">Height/Age Stunted</a>
                        </li>
                    </ul>
                    <div class="tab-content">
                        <div role="tabpanel" class="tab-pane" id="home">
                            <div class="row">
                                <div class="col-sm-12">
                                    <table id="GridWA"></table>
                                </div>
                            </div>
                        </div>
                        <div role="tabpanel" class="tab-pane" id="profile">
                            <div class="row">
                                <div class="col-sm-12">
                                    <table id="GridHW"></table>
                                </div>
                            </div>
                        </div>
                        <div role="tabpanel" class="tab-pane" id="messages">
                            <div class="row">
                                <div class="col-sm-12">
                                    <table id="GridHA"></table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
</div>


<script src="http://code.jquery.com/jquery-migrate-1.2.1.js"></script>
<script type="text/javascript">
    $(document).ready(function () {

        $("#tblGrade").hide();
        $("#tblGrade2").hide();
        $('.datepicker').datepicker({
            dateFormat: "dd/mm/yy",
            changeMonth: true,
            changeYear: true,
            yearRange: '1950:' + new Date().getFullYear(),
            maxDate: new Date()
        });

        $("#btnclick").click(function () {
            if ($('#Gender').val() == "0" || $('#Gender').val() == null) {
                alert("Please Select Gender")
                $('#Gender').focus();
                return false;
            }
            else {
                EnableDisableWA();
            }
            $("#divtabs").toggle();
        });


        $("#btnSubmit").click(function () {

            if ($("#Gender").val() == "0" || $("#Gender").val() == " " || $("#Gender").val() == null) {
                alert("Please Select Gender");
                $("#Gender").focus();
                return false;
            }
            else if ($("#DOB").val() == "0" || $("#DOB").val() == " " || $("#DOB").val() == null) {
                alert("Please Select Date of Birth");
                $("#DOB").focus();
                return false;
            }
            else if ($("#Weight").val() == "0" || $("#Weight").val() == " " || $("#Weight").val() == null) {
                alert("Please Enter Weight");
                $("#Weight").focus();
                return false;
            }
            else if ($("#Height").val() == "0" || $("#Height").val() == " " || $("#Height").val() == null) {
                alert("Please Enter Height");
                $("#Height").focus();
                return false;
            }
            else {
                var PostedData = {
                    Gender: $("#Gender option:selected").val(),
                    DOB: $("#DOB").val(),
                    Weight: $("#Weight").val(),
                    Height: $("#Height").val(),
                    BeneType: "1"
                }

                showPleaseWait();
                $.ajax({
                    type: "POST",
                    url: '/Reports/GetChildGrowthGradeNames',
                    data: JSON.stringify(PostedData),
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    async: true,
                    success: function (result) {
                        $("#AgeinMonths").text(result.AgeInMonths);
                        $("#HA1").text(result.HeightAgeGradeName);
                        $("#HW1").text(result.HeightWeightGradeName);
                        $("#WA1").text(result.WeightAgeGradeName);
                        HeightAgeGradeColor(result.HeightAgeGradeName);
                        HeightWeightGradeColor(result.HeightWeightGradeName);
                        WeightAgeGradeColor(result.WeightAgeGradeName);
                        $("#tblGrade").show();
                        $("#tblGrade2").show();
                        hidePleaseWait();
                    },
                    error: function (result) {
                        hidePleaseWait();
                    }


                });
            }
        });
    });

    function HeightAgeGradeColor(GradeName) {
        if (GradeName == "Normal") {
            $('#HA1').css("color", "#00a65a");
        }
        else if (GradeName == "Moderate") {
            $('#HA1').css("color", "#f39c12");
        }
        else if (GradeName == "Severe") {
            $('#HA1').css("color", "#dd4b39");
        }
        else {
            $('#HA1').css("color", "#333");
        }
    }

    function HeightWeightGradeColor(GradeName) {
        if (GradeName == "Normal") {
            $('#HW1').css("color", "#00a65a");
        }
        else if (GradeName == "Moderate") {
            $('#HW1').css("color", "#f39c12");
        }
        else if (GradeName == "Severe") {
            $('#HW1').css("color", "#dd4b39");
        }
        else {
            $('#HW1').css("color", "#333");
        }
    }

    function WeightAgeGradeColor(GradeName) {
        if (GradeName == "Normal") {
            $('#WA1').css("color", "#00a65a");
        }
        else if (GradeName == "Moderate") {
            $('#WA1').css("color", "#f39c12");
        }
        else if (GradeName == "Severe") {
            $('#WA1').css("color", "#dd4b39");
        }
        else {
            $('#WA1').css("color", "#333");
        }
    }

    function ddchange() {
        debugger;
        EnableDisableWA();
        $("#lihome").addClass("active");
        $("#liprofile").removeClass("active");
        $("#limessages").removeClass("active");
        $("#home").addClass("active");
        $("#profile").removeClass("active");
        $("#messages").removeClass("active");

        $("#home").css('display', 'block');
        $("#home").addClass("tab-pane");
        $("#profile").css('display', 'none');
        $("#messages").css('display', 'none');
    }

</script>
<script src="~/Scripts/Common/jquery.jqGrid.min.js"></script>